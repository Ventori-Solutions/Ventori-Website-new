---
/* no frontmatter needed */
---
<section class="section bg-secondary overflow-hidden">
  <div class="container">
    <div class="section-head center">
      <h2 class="h2">Our Technology Partners</h2>
      <p class="lead muted">We work with leading AI and automation platforms to deliver best-in-class solutions</p>
    </div>

    <div class="tech-track" id="tech-track" aria-label="Technology partners scroller">
      <div class="tech-scroller" id="tech-scroller">
        <!-- ONE canonical row. JS will clone this as needed. -->
        <div class="tech-row" id="tech-row">
          <div class="tech-item"><i class="fab fa-microsoft" aria-hidden="true"></i><span class="sr-only">Microsoft</span></div>
          <div class="tech-item"><i class="fab fa-google" aria-hidden="true"></i><span class="sr-only">Google</span></div>
          <div class="tech-item"><i class="fab fa-aws" aria-hidden="true"></i><span class="sr-only">AWS</span></div>
          <div class="tech-item"><i class="fab fa-python" aria-hidden="true"></i><span class="sr-only">Python</span></div>
          <div class="tech-item"><i class="fas fa-robot" aria-hidden="true"></i><span class="sr-only">Robotics</span></div>
          <div class="tech-item"><i class="fas fa-database" aria-hidden="true"></i><span class="sr-only">Databases</span></div>
        </div>
        <!-- JS will append clones here -->
      </div>

      <!-- edge fades -->
      <div class="fade-left" aria-hidden="true"></div>
      <div class="fade-right" aria-hidden="true"></div>
    </div>
  </div>
</section>

<style>
/* layout baseline */
.container{max-width:1200px;margin:0 auto;padding:0 16px}
.section-head.center{text-align:center;margin-bottom:1.25rem}
.h2{margin-bottom:.5rem}

/* marquee */
.tech-track{
  /* tune these */
  --tile-gap:16px;        /* gap between tiles inside a row */
  --group-gap:16px;       /* gap between cloned groups (A ↔ B) */
  --speed:40;             /* px/s — controls speed */
  --segment-w:0px;        /* set by JS (row width + group gap) */
  --duration:20s;         /* set by JS based on speed & segment width */

  position:relative;
  overflow:hidden;
  max-width:1200px;       /* ensure scroller itself is constrained */
  margin-inline:auto;
  padding: 1rem 0 0 0;
}

/* The moving strip */
.tech-scroller{
  display:flex;
  column-gap:var(--group-gap);  /* space BETWEEN groups (A, B, C...) */
  width:max-content;
  will-change:transform;
  animation: marquee var(--duration) linear infinite;
}
.tech-track:hover .tech-scroller,
.tech-track:focus-within .tech-scroller{ animation-play-state: paused; }

/* One group (row) contains tiles with their own internal gap */
.tech-row{ display:flex; gap:var(--tile-gap); }

.tech-item{
  min-width:150px; display:grid; place-items:center;
  padding:16px 20px; background:var(--bg-accent,#192d49);
  border-radius:12px; border:1px solid transparent;
  transition:border var(--transition,.2s), transform var(--transition,.2s);
  color:var(--text,#f3f3f3); font-size:3rem; user-select:none; white-space:nowrap;
}
.tech-item:hover{ border-color:var(--accent,#00a8e8); transform:translateY(-2px); }
.tech-item svg{ width:2.6rem; height:2.6rem; display:block; }

/* a11y helpers */
.sr-only{ position:absolute;width:1px;height:1px;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0; }

/* fades */
.fade-left,.fade-right{
  position:absolute;top:0;bottom:0;width:80px;pointer-events:none;z-index:2;
  background:linear-gradient(to right, var(--bg-secondary,#000E21), transparent);
}
.fade-right{ right:0;left:auto;background:linear-gradient(to left, var(--bg-secondary,#000E21), transparent); }
.fade-left{ left:0; }

/* keyframes: move exactly one segment (row + group gap) */
@keyframes marquee{
  from{ transform:translate3d(0,0,0); }
  to  { transform:translate3d(calc(-1 * var(--segment-w)),0,0); }
}

/* reduced motion */
@media (prefers-reduced-motion: reduce){ .tech-scroller{ animation:none; } }
</style>

<script is:inline>
/**
 * Seamless marquee with explicit gap between cloned groups.
 * Segment = rowWidth + groupGap. We animate exactly -segment.
 */
(function(){
  const track    = document.getElementById('tech-track');
  const scroller = document.getElementById('tech-scroller');
  const row      = document.getElementById('tech-row');
  if (!track || !scroller || !row) return;

  function numberFromCSS(val){ return parseFloat(String(val).replace('px','')) || 0; }

  function setup(){
    // purge previous clones
    [...scroller.children].forEach((n)=>{ if(n!==row) n.remove(); });

    // measure canonical row
    const rowW = row.getBoundingClientRect().width;

    // read the GROUP gap (between clones) from computed styles on the scroller
    const cs = getComputedStyle(scroller);
    // column-gap is what we set; row-gap is 0
    const groupGap = numberFromCSS(cs.columnGap);

    // one full segment = row + group gap
    const segmentW = rowW + groupGap;

    // viewport to cover while animating one segment
    const viewportW = track.getBoundingClientRect().width;

    // ensure enough content to cover viewport during the shift of one segment
    // Need scrollerWidth >= viewportW + segmentW
    let scrollerW = rowW; // start with the original row (no extra gap at start)
    while (scrollerW < viewportW + segmentW) {
      const clone = row.cloneNode(true);
      clone.setAttribute('aria-hidden','true');
      scroller.appendChild(clone);
      scrollerW += segmentW;
    }

    // Set CSS vars
    scroller.style.setProperty('--segment-w', segmentW + 'px');

    const trackCS  = getComputedStyle(track);
    const speed    = parseFloat(trackCS.getPropertyValue('--speed')) || 90; // px/s
    const duration = Math.max(1, segmentW / speed); // seconds
    scroller.style.setProperty('--duration', duration + 's');

    // restart animation cleanly
    scroller.style.animation = 'none';
    // force reflow
    void scroller.offsetHeight;
    scroller.style.animation = '';
    scroller.style.animationDuration = duration + 's';
  }

  // Debounce resize
  let t;
  const onResize = () => { clearTimeout(t); t = setTimeout(setup, 150); };

  window.addEventListener('resize', onResize, { passive:true });
  setup();
})();
</script>
